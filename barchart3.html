<!DOCTYPE html>
    <html lang="en">
        <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="author" content="Kartik">
        <title>bar chart 3</title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <style>
            .chart rect{
                fill:steelblue;
            }
            .chart text{
                font-family: sans-serif;
                fill: white;
                text-anchor: middle;
            }
            .chart rect:hover{
                fill: grey;
            }
        </style>
        </head>
        <body>
            <svg class="chart"></svg>
        <script>
            let width=960,height=500;

            let scale = d3.scaleLinear()
                            .range([height,0]);
            let chart = d3.select('.chart')
                            .attr('width',width)
                            .attr('height',height);
                            
            d3.tsv('data.tsv',type,(error,data)=>{
    
                scale.domain([0,d3.max(data,(d)=>{return d.value;})]);
                                          
            let barWidth = width/data.length;

            let bar = chart.selectAll('g')
                            .data(data).enter()
                            .append('g')
                            .attr('transform',(d,i)=>{return 'translate('+i*barWidth+',0)';})
            bar.append('rect')
                .attr('y',(d)=>{console.log(scale(d.value));return scale(d.value);})
                .attr('width',barWidth)
                .attr('height',(d)=>{return height-scale(d.value);});   

            bar.append('text')
                .attr('x',barWidth/2)
                .attr('y',(d)=>{return(scale(d.value)+50);})
                .attr('dy','.75em')
                .text((d)=>{return d.letter});    
            });  
            function type(d){
                d.value =+d.value
                return d;
            }                 
        </script>
        </body>
    </html>